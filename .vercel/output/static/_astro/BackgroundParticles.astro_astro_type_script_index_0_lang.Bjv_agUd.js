const t=document.getElementById("canvas");if(!t)console.error("Canvas element not found");else{let d=function(){t.width=window.innerWidth,t.height=window.innerHeight},f=function(){this.x=Math.random()*t.width,this.y=Math.random()*t.height,this.z=Math.random()*1e3+1e3,this.size=Math.random()*.5+.2,this.color=r[Math.floor(Math.random()*r.length)],this.twinkle=Math.random()*Math.PI*2,this.twinkleSpeed=Math.random()*.01+.005},c=function(){this.x=Math.random()*t.width,this.y=Math.random()*t.height,this.z=Math.random()*500+500,this.size=Math.random()*1.5+.5,this.color=r[Math.floor(Math.random()*r.length)],this.twinkle=Math.random()*Math.PI*2,this.twinkleSpeed=Math.random()*.02+.01,this.speedX=(Math.random()-.5)*.3,this.speedY=(Math.random()-.5)*.3},p=function(){this.x=Math.random()*t.width,this.y=Math.random()*t.height,this.z=Math.random()*200+50,this.size=Math.random()*3+1,this.color=r[Math.floor(Math.random()*r.length)],this.twinkle=Math.random()*Math.PI*2,this.twinkleSpeed=Math.random()*.03+.02,this.speedX=(Math.random()-.5)*.8,this.speedY=(Math.random()-.5)*.8},y=function(){this.x=Math.random()*t.width,this.y=Math.random()*t.height,this.size=Math.random()*200+100,this.color=["#ff00ff","#00ffff","#ff8800","#8800ff","#00ff88"][Math.floor(Math.random()*5)],this.alpha=Math.random()*.1+.02,this.drift=Math.random()*.2+.1,this.angle=Math.random()*Math.PI*2},g=function(){switch(Math.floor(Math.random()*4)){case 0:this.x=Math.random()*t.width,this.y=-100;break;case 1:this.x=t.width+100,this.y=Math.random()*t.height;break;case 2:this.x=Math.random()*t.width,this.y=t.height+100;break;case 3:this.x=-100,this.y=Math.random()*t.height;break}const i=t.width*Math.random(),a=t.height*Math.random(),o=Math.sqrt((i-this.x)**2+(a-this.y)**2),s=Math.random()*4+3;this.speedX=(i-this.x)/o*s,this.speedY=(a-this.y)/o*s,this.size=Math.random()*4+3,this.trail=[],this.maxTrailLength=25,this.color=["#ffffff","#ffff88","#88ffff","#ff88ff"][Math.floor(Math.random()*4)],this.life=2e3},w=function(){this.x=Math.random()*t.width,this.y=Math.random()*t.height,this.pulse=0,this.pulseSpeed=Math.random()*.05+.02,this.color=["#ff0080","#0080ff","#80ff00","#ff8000"][Math.floor(Math.random()*4)],this.maxSize=Math.random()*30+20},k=function(){for(let e=0;e<150;e++)u.push(new f);for(let e=0;e<100;e++)m.push(new c);for(let e=0;e<50;e++)x.push(new p);for(let e=0;e<8;e++)S.push(new y);for(let e=0;e<5;e++)z.push(new w)},M=function(){const e=h.createLinearGradient(0,0,0,t.height);e.addColorStop(0,"#000011"),e.addColorStop(.5,"#000022"),e.addColorStop(1,"#000033"),h.fillStyle=e,h.fillRect(0,0,t.width,t.height),S.forEach(i=>{i.update(),i.draw()}),z.forEach(i=>{i.update(),i.draw()}),u.forEach(i=>{i.update(),i.draw()}),m.forEach(i=>{i.update(),i.draw()}),x.forEach(i=>{i.update(),i.draw()}),Date.now()-b>6e3&&n.length<4&&(n.push(new g),b=Date.now());for(let i=n.length-1;i>=0;i--)n[i].update()?n[i].draw():n.splice(i,1);requestAnimationFrame(M)};const h=t.getContext("2d");let l={x:0,y:0};d(),window.addEventListener("resize",d);let u=[],m=[],x=[],S=[],n=[],z=[];const r=["#ffffff","#ffffcc","#ccccff","#ffcccc","#ccffcc","#ffaa88","#88aaff","#ff88aa","#aaff88","#ffff88"];f.prototype.update=function(){this.twinkle+=this.twinkleSpeed},f.prototype.draw=function(){t.width/2,t.height/2;let e,i,a;if(e=this.x+(l.x-t.width/2)*.002,i=this.y+(l.y-t.height/2)*.002,a=this.size,e<-50||e>t.width+50||i<-50||i>t.height+50)return;const o=(.3+Math.sin(this.twinkle)*.2)*1;h.globalAlpha=o,h.fillStyle=this.color,h.beginPath(),h.arc(e,i,a,0,Math.PI*2),h.fill(),h.globalAlpha=1},c.prototype.update=function(){this.twinkle+=this.twinkleSpeed,this.x+=this.speedX,this.y+=this.speedY,this.x<0&&(this.x=t.width),this.x>t.width&&(this.x=0),this.y<0&&(this.y=t.height),this.y>t.height&&(this.y=0)},c.prototype.draw=function(){t.width/2,t.height/2;let e,i,a;if(e=this.x+(l.x-t.width/2)*.005,i=this.y+(l.y-t.height/2)*.005,a=this.size,e<-50||e>t.width+50||i<-50||i>t.height+50)return;const o=.6+Math.sin(this.twinkle)*.3;h.globalAlpha=o,h.fillStyle=this.color,h.beginPath(),h.arc(e,i,a,0,Math.PI*2),h.fill(),a>1&&(h.strokeStyle=this.color,h.lineWidth=.5,h.beginPath(),h.moveTo(e-a*2,i),h.lineTo(e+a*2,i),h.moveTo(e,i-a*2),h.lineTo(e,i+a*2),h.stroke()),h.globalAlpha=1},p.prototype.update=function(){this.twinkle+=this.twinkleSpeed,this.x+=this.speedX,this.y+=this.speedY,this.x<0&&(this.x=t.width),this.x>t.width&&(this.x=0),this.y<0&&(this.y=t.height),this.y>t.height&&(this.y=0)},p.prototype.draw=function(){t.width/2,t.height/2;let e,i,a;if(e=this.x+(l.x-t.width/2)*.01,i=this.y+(l.y-t.height/2)*.01,a=this.size,e<-100||e>t.width+100||i<-100||i>t.height+100)return;const o=.7+Math.sin(this.twinkle)*.3,s=h.createRadialGradient(e,i,0,e,i,a*3);s.addColorStop(0,this.color),s.addColorStop(.4,this.color+"80"),s.addColorStop(1,this.color+"00"),h.globalAlpha=o*.3,h.fillStyle=s,h.beginPath(),h.arc(e,i,a*3,0,Math.PI*2),h.fill(),h.globalAlpha=o,h.fillStyle=this.color,h.beginPath(),h.arc(e,i,a,0,Math.PI*2),h.fill(),h.globalAlpha=1},y.prototype.update=function(){this.angle+=.001,this.x+=Math.sin(this.angle)*this.drift,this.y+=Math.cos(this.angle)*this.drift*.5,this.x<-this.size&&(this.x=t.width+this.size),this.x>t.width+this.size&&(this.x=-this.size),this.y<-this.size&&(this.y=t.height+this.size),this.y>t.height+this.size&&(this.y=-this.size)},y.prototype.draw=function(){const e=this.x+(l.x-t.width/2)*.001,i=this.y+(l.y-t.height/2)*.001,a=h.createRadialGradient(e,i,0,e,i,this.size);a.addColorStop(0,this.color+Math.floor(this.alpha*255).toString(16).padStart(2,"0")),a.addColorStop(.5,this.color+Math.floor(this.alpha*128).toString(16).padStart(2,"0")),a.addColorStop(1,this.color+"00"),h.fillStyle=a,h.beginPath(),h.arc(e,i,this.size,0,Math.PI*2),h.fill()},g.prototype.update=function(){return this.trail.push({x:this.x,y:this.y}),this.trail.length>this.maxTrailLength&&this.trail.shift(),this.x+=this.speedX,this.y+=this.speedY,this.life--,this.life>0&&this.x>-200&&this.x<t.width+200&&this.y>-200&&this.y<t.height+200},g.prototype.draw=function(){for(let i=0;i<this.trail.length;i++){const a=i/this.trail.length*.8,o=i/this.trail.length*this.size;h.globalAlpha=a;const s=h.createRadialGradient(this.trail[i].x,this.trail[i].y,0,this.trail[i].x,this.trail[i].y,o*2);s.addColorStop(0,this.color),s.addColorStop(1,this.color+"00"),h.fillStyle=s,h.beginPath(),h.arc(this.trail[i].x,this.trail[i].y,o*2,0,Math.PI*2),h.fill()}h.globalAlpha=1;const e=h.createRadialGradient(this.x,this.y,0,this.x,this.y,this.size*4);e.addColorStop(0,"#ffffff"),e.addColorStop(.3,this.color),e.addColorStop(1,this.color+"00"),h.fillStyle=e,h.beginPath(),h.arc(this.x,this.y,this.size*4,0,Math.PI*2),h.fill(),h.fillStyle="#ffffff",h.beginPath(),h.arc(this.x,this.y,this.size,0,Math.PI*2),h.fill()},w.prototype.update=function(){this.pulse+=this.pulseSpeed},w.prototype.draw=function(){const e=this.x+(l.x-t.width/2)*.003,i=this.y+(l.y-t.height/2)*.003,a=(Math.sin(this.pulse)*.5+.5)*this.maxSize,o=Math.sin(this.pulse)*.3+.1;h.globalAlpha=o;const s=h.createRadialGradient(e,i,0,e,i,a);s.addColorStop(0,this.color),s.addColorStop(.7,this.color+"80"),s.addColorStop(1,this.color+"00"),h.fillStyle=s,h.beginPath(),h.arc(e,i,a,0,Math.PI*2),h.fill(),h.globalAlpha=1};let b=0;document.addEventListener("mousemove",e=>{l.x=e.clientX,l.y=e.clientY}),k(),M(),window.addEventListener("resize",()=>{d()}),window.addEventListener("load",()=>{t.style.display="block"}),window.addEventListener("beforeunload",()=>{t.style.display="none"}),window.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"?t.style.display="none":t.style.display="block"}),window.addEventListener("focus",()=>{t.style.display="block"})}
